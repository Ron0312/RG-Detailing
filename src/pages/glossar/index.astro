---
import Layout from '../../layouts/Layout.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';
import { getCollection } from 'astro:content';
import { ArrowRight, Book } from 'lucide-react';

const glossaryEntries = await getCollection('glossary');
const sortedEntries = glossaryEntries.sort((a, b) => a.data.title.localeCompare(b.data.title));
---

<Layout title="Glossar & Fachbegriffe | RG Detailing" description="Das RG Detailing Lexikon. Wir erklären Fachbegriffe aus der Fahrzeugaufbereitung wie Hologramme, Standzeit und Keramikversiegelung.">

    <div class="relative min-h-[40vh] flex items-center justify-center overflow-hidden bg-black">
        <div class="absolute inset-0 bg-red-900/10 mix-blend-overlay"></div>
        <div class="container mx-auto px-4 z-10 text-center pt-20">
            <span class="inline-block py-1 px-3 rounded-full bg-white/5 border border-white/10 text-zinc-300 text-sm font-bold tracking-wider mb-6 uppercase backdrop-blur-md">
                Wissen schafft Vertrauen
            </span>
            <h1 class="text-4xl md:text-6xl font-bold mb-6 text-white">Fahrzeugpflege <br/> <span class="text-red-500">Lexikon</span></h1>
        </div>
    </div>

    <main class="container mx-auto px-4 py-12 -mt-20 relative z-20">
        <Breadcrumbs crumbs={[
            { label: 'Startseite', href: '/' },
            { label: 'Glossar', href: '/glossar' }
        ]} />

        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mt-12">
            {sortedEntries.map((entry) => (
                <a href={`/glossar/${entry.slug}`} class="glass-panel p-8 hover:bg-zinc-800 transition-colors group flex flex-col h-full">
                    <div class="flex items-center gap-3 mb-4 text-red-500">
                        <Book size={20} />
                        <span class="text-xs font-bold uppercase tracking-widest">{entry.data.category}</span>
                    </div>
                    <h2 class="text-2xl font-bold text-white mb-3 group-hover:text-red-400 transition-colors">{entry.data.title}</h2>
                    <p class="text-zinc-400 text-sm mb-6 line-clamp-3 leading-relaxed flex-grow">
                        {entry.data.description}
                    </p>
                    <div class="flex items-center text-sm font-bold text-white mt-auto pt-4 border-t border-white/5">
                        Definition lesen <ArrowRight className="ml-2 w-4 h-4 transform group-hover:translate-x-1 transition-transform" />
                    </div>
                </a>
            ))}
        </div>

        {sortedEntries.length === 0 && (
             <div class="text-center py-20">
                <p class="text-zinc-400">Das Glossar wird gerade befüllt. Schauen Sie bald wieder vorbei!</p>
             </div>
        )}
    </main>

</Layout>
