---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';
import ScrollProgress from '../../components/ScrollProgress.jsx';
import { Calendar, User } from 'lucide-react';

export const prerender = true;

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map(post => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={`${post.data.title} | RG Detailing Blog`} description={post.data.description}>
    <ScrollProgress client:load />
    <div class="container mx-auto px-4 py-32">
        <Breadcrumbs crumbs={[
            { label: 'Startseite', href: '/' },
            { label: 'Blog', href: '/blog' },
            { label: post.data.title, href: `/blog/${post.slug}` }
        ]} />

        <article class="max-w-3xl mx-auto mt-12">
            <header class="mb-12 text-center">
                <div class="flex items-center justify-center gap-4 text-sm text-zinc-500 mb-6 font-medium uppercase tracking-wider">
                    <span class="text-red-500 font-bold">{post.data.category}</span>
                    <span>•</span>
                    <span class="flex items-center gap-2"><Calendar size={14}/> {post.data.date.toLocaleDateString('de-DE')}</span>
                    <span>•</span>
                    <span class="flex items-center gap-2"><User size={14}/> {post.data.author}</span>
                </div>
                <h1 class="text-4xl md:text-5xl font-bold text-white mb-6 leading-tight">{post.data.title}</h1>
                <p class="text-xl text-zinc-400 leading-relaxed max-w-2xl mx-auto">{post.data.description}</p>
            </header>

            <div class="prose prose-invert prose-lg mx-auto bg-zinc-900/30 p-8 md:p-12 rounded-3xl border border-white/5">
                <Content />
            </div>

            <div class="mt-12 text-center">
                 <a href="/blog" class="text-zinc-500 hover:text-white transition-colors underline decoration-zinc-700 underline-offset-4">Zurück zur Übersicht</a>
            </div>
        </article>
    </div>
</Layout>
