---
import Layout from '../layouts/Layout.astro';
import BeforeAfterSlider from '../components/BeforeAfterSlider.jsx';
import PriceCalculator from '../components/PriceCalculator.jsx';
import Reviews from '../components/Reviews.astro';
import About from '../components/About.astro';
import CeramicComparison from '../components/CeramicComparison.astro';
import GalleryLightbox from '../components/GalleryLightbox.jsx';
import ServiceGrid from '../components/ServiceGrid.jsx';
import FAQ from '../components/FAQ.jsx';
import ParticleHero from '../components/ParticleHero.jsx';
import ScrollReveal from '../components/ScrollReveal.jsx';
import { services } from '../data/services';
import { Gem, FlaskConical, Handshake, ArrowRight, CheckCircle2, MessageCircle, Calendar, Car, Sparkles, Star, MapPin } from 'lucide-react';
import { Image, getImage } from 'astro:assets';
import heroImage from '../assets/hero-workshop.jpg';
import wohnmobilBefore from '../assets/wohnmobil-before.jpg';
import wohnmobilAfter from '../assets/wohnmobil-after.jpg';

// Gallery Images Imports
import imgLack from '../assets/gallery/fahrzeugaufbereitung-tensfeld-lackveredelung-01.png';
import imgInnen2 from '../assets/gallery/fahrzeugaufbereitung-tensfeld-innenreinigung-02.jpg';
import imgKeramik3 from '../assets/gallery/fahrzeugaufbereitung-tensfeld-keramikversiegelung-03.jpg';
import imgVorherNachher4 from '../assets/gallery/fahrzeugaufbereitung-tensfeld-vorher-nachher-04.jpg';
import imgDetailing5 from '../assets/gallery/fahrzeugaufbereitung-tensfeld-detailing-05.jpg';
import imgCoating6 from '../assets/gallery/fahrzeugaufbereitung-tensfeld-coating-06.jpg';

export const prerender = true;

const [optimizedBefore, optimizedAfter] = await Promise.all([
  getImage({src: wohnmobilBefore, format: 'avif', width: 1024}),
  getImage({src: wohnmobilAfter, format: 'avif', width: 1024})
]);

const galleryRawImages = [
  { src: imgLack, alt: "Lackveredelung und Fahrzeugaufbereitung Ergebnis für Kunden aus Neumünster", category: "Lack" },
  { src: imgInnen2, alt: "Professionelle Innenraumreinigung Vorher-Nachher RG Detailing", category: "Innenraum" },
  {
    src: imgKeramik3,
    alt: "Keramikversiegelung Hochglanz Ergebnis Labocosmetica",
    category: "Keramik",
    title: "Labocosmetica Keramikversiegelung",
    description: "Extremer Tiefenglanz und langanhaltender Schutz durch zertifizierte Labocosmetica Keramikversiegelung."
  },
  {
    src: imgVorherNachher4,
    alt: "Fahrzeugaufbereitung Detailarbeit Ergebnis",
    category: "Keramik",
    title: "Lackveredelung vor Versiegelung",
    description: "Perfekte Vorbereitung des Lacks durch mehrstufige Politur als Basis für die Keramikversiegelung."
  },
  {
    src: imgDetailing5,
    alt: "Exklusives Detailing Ergebnis Schleswig-Holstein",
    category: "Keramik",
    title: "High-End Detailing Schleswig-Holstein",
    description: "Perfektes Finish und Lackveredelung für höchste Ansprüche in Schleswig-Holstein."
  },
  {
    src: imgCoating6,
    alt: "Professionelles Coating / Keramikversiegelung Anwendung",
    category: "Keramik",
    title: "Professionelle Coating Anwendung",
    description: "Fachgerechte Applikation der Keramikversiegelung für maximalen Schutz und Abperleffekt."
  }
];

const galleryImages = await Promise.all(galleryRawImages.map(async (img) => {
    const [full, thumb] = await Promise.all([
        getImage({ src: img.src, format: 'webp', width: 1280 }),
        getImage({ src: img.src, format: 'webp', width: 600 })
    ]);
    return {
        src: full.src,
        thumbnail: thumb.src,
        alt: img.alt,
        category: img.category,
        title: img.title,
        description: img.description
    };
}));

const faqItems = [
  {
    question: "Holen Sie das Fahrzeug auch in Neumünster ab?",
    answer: "Ja, wir bieten einen Hol- und Bringservice für Neumünster an. Alternativ sind wir nur ca. 20 Minuten Fahrt entfernt – für viele Kunden lohnt sich der Weg aufgrund unserer Spezialisierung."
  },
  {
    question: "Was kostet eine Fahrzeugaufbereitung für Kunden aus Neumünster?",
    answer: 'Die Preise sind standortunabhängig. Nutzen Sie unseren <a href="#rechner" class="text-red-500 hover:underline">Preisrechner</a> für eine individuelle Schätzung. Wir bieten Pakete von der einfachen Auto Komplettreinigung bis zum Full Detailing.'
  },
  {
    question: "Wie lange muss mein Auto bei Ihnen bleiben?",
    answer: "Je nach Paket zwischen 1 Tag (Innenraum/Basis) und 3-4 Tagen (Full Detailing mit Keramikversiegelung inkl. Aushärtezeit)."
  }
];

const localSchema = {
  "@context": "https://schema.org",
  "@type": "AutoDetailing",
  "name": "RG Detailing - Fahrzeugaufbereitung für Neumünster",
  "url": "https://rg-detailing.de/autoaufbereitung-neumuenster",
  "description": "Premium Fahrzeugaufbereitung & Keramikversiegelung für Neumünster. Zertifizierte Lackveredelung nur 20 Min. entfernt.",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "Dorfstraße 11",
    "addressLocality": "Tensfeld",
    "postalCode": "23824",
    "addressCountry": "DE"
  },
  "areaServed": {
    "@type": "City",
    "name": "Neumünster"
  }
};
---

<Layout
    title="Fahrzeugaufbereitung Neumünster | Keramikversiegelung & Politur"
    description="Suchen Sie Top-Fahrzeugaufbereitung in Neumünster? RG Detailing in Tensfeld bietet High-End Lackveredelung & Keramikversiegelung nur 20 Min entfernt."
    schema={[localSchema]}
    preloadImage={heroImage.src}
>

    {/* HERO SECTION */}
    <div class="relative min-h-[80vh] flex items-center justify-center overflow-hidden bg-black">
        {/* Particle Canvas Layer */}
        <div class="absolute inset-0 z-10 pointer-events-none">
            <ParticleHero client:load />
        </div>

        {/* Hero Image */}
        <div class="absolute inset-0 z-0">
             <Image
                src={heroImage}
                alt="Fahrzeugaufbereitung Werkstatt Nähe Neumünster"
                class="w-full h-full object-cover object-bottom opacity-50"
                loading="eager"
                fetchpriority="high"
                format="avif"
                widths={[640, 768, 1024, 1280, 1536, 1920]}
                sizes="100vw"
             />
             <div class="absolute inset-0 bg-gradient-to-b from-black/80 via-black/40 to-black"></div>
        </div>

        <div class="container mx-auto px-4 z-20 text-center pt-20">
            <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-red-900/30 border border-red-500/30 backdrop-blur-md mb-6 animate-fade-in-up">
                 <MapPin size={16} class="text-red-500" />
                 <span class="text-xs font-bold text-white uppercase tracking-wider">Nur 20 Min. von Neumünster</span>
            </div>

            <h1 class="text-4xl md:text-7xl font-bold mb-6 text-white tracking-tighter leading-[1.1] animate-fade-in-up delay-100">
                Premium Aufbereitung <br/>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-red-500 via-red-600 to-red-800">für Neumünster</span>
            </h1>
            <p class="text-lg md:text-2xl text-zinc-300 max-w-2xl mx-auto mb-10 font-normal leading-relaxed animate-fade-in-up delay-200">
                Lohnt sich der Weg? <strong class="text-white">Absolut.</strong> Wir sind Ihre Spezialisten für Lackveredelung und zertifizierte Keramikversiegelung, die Sie in Neumünster so nicht finden.
            </p>
            <div class="flex flex-col sm:flex-row justify-center gap-4 animate-fade-in-up delay-300 px-4">
                <a href="#rechner" class="group relative px-8 py-5 bg-red-700 rounded-2xl font-bold text-white overflow-hidden transition-all hover:scale-105 hover:shadow-[0_0_50px_-10px_rgba(220,38,38,0.6)] w-full sm:w-auto">
                    <span class="relative z-10 flex items-center justify-center gap-2">Preis für mein Auto berechnen <ArrowRight className="w-5 h-5" /></span>
                    <div class="absolute inset-0 bg-gradient-to-r from-red-600 to-red-500 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                </a>
            </div>
        </div>
    </div>

    <main class="w-full overflow-x-hidden">

        {/* USP / LOCATION INFO */}
        <section class="section-spacing relative bg-zinc-900/20 border-b border-white/5">
            <div class="container mx-auto px-4">
                 <div class="max-w-4xl mx-auto text-center">
                     <h2 class="text-3xl md:text-4xl font-bold text-white mb-6">Warum Kunden aus Neumünster zu uns kommen</h2>
                     <p class="text-zinc-400 text-lg leading-relaxed mb-12">
                         Viele unserer Stammkunden kommen direkt aus Neumünster und Umgebung. Warum? Weil wir uns als Manufaktur verstehen.
                         Statt schneller Fließbandarbeit bieten wir <strong>individuelle High-End Lösungen</strong> für Liebhaberfahrzeuge, Leasingrückläufer und Alltagsautos,
                         die ihren Wert behalten sollen.
                     </p>

                     <div class="grid md:grid-cols-3 gap-8 text-left">
                         <div class="glass-panel p-6 rounded-2xl">
                             <CheckCircle2 class="text-red-500 w-8 h-8 mb-4" />
                             <h3 class="text-white font-bold mb-2">Spezialisierung</h3>
                             <p class="text-sm text-zinc-400">Zertifizierte Labocosmetica Expertise statt Standard-Politur.</p>
                         </div>
                         <div class="glass-panel p-6 rounded-2xl">
                             <CheckCircle2 class="text-red-500 w-8 h-8 mb-4" />
                             <h3 class="text-white font-bold mb-2">Service</h3>
                             <p class="text-sm text-zinc-400">Hol- & Bringservice oder Ersatzwagen nach Absprache möglich.</p>
                         </div>
                         <div class="glass-panel p-6 rounded-2xl">
                             <CheckCircle2 class="text-red-500 w-8 h-8 mb-4" />
                             <h3 class="text-white font-bold mb-2">Ergebnis</h3>
                             <p class="text-sm text-zinc-400">Defektkorrektur statt nur "drüber polieren".</p>
                         </div>
                     </div>
                 </div>
            </div>
        </section>

        {/* SERVICES */}
        <section id="leistungen" class="section-spacing">
             <div class="container mx-auto px-4">
                <div class="text-center mb-16">
                    <span class="text-red-500 font-bold tracking-widest text-sm uppercase">Unser Angebot</span>
                    <h2 class="text-3xl md:text-5xl font-bold mt-4 text-white">Full Service Detailing</h2>
                </div>
                <ServiceGrid client:visible services={services} />
            </div>
        </section>

        {/* COMPARISON SLIDER */}
        <section class="section-spacing bg-zinc-900/20 border-y border-white/5">
            <div class="container mx-auto px-4">
                 <div class="flex flex-col md:flex-row items-center gap-16">
                     <div class="md:w-1/3">
                         <span class="text-red-500 font-bold tracking-widest text-sm uppercase">Das Ergebnis</span>
                         <h2 class="text-4xl font-bold mb-6 text-white mt-2">Der RG-Effekt</h2>
                         <p class="text-zinc-400 mb-8 text-lg leading-relaxed">
                             Sehen Sie selbst, was wir aus einem Lack herausholen können. Wir entfernen Grauschleier und Kratzer dauerhaft.
                         </p>
                     </div>
                     <div class="md:w-2/3 w-full">
                        <div class="rounded-3xl overflow-hidden shadow-2xl border border-white/10 relative group">
                             <BeforeAfterSlider
                                client:visible
                                beforeImage={optimizedBefore.src}
                                afterImage={optimizedAfter.src}
                                alt="Fahrzeugaufbereitung Vorher Nachher Vergleich"
                            />
                        </div>
                     </div>
                 </div>
            </div>
        </section>

        {/* REVIEWS */}
        <Reviews limit={4} />

        {/* CALCULATOR */}
        <section id="rechner" class="section-spacing relative overflow-hidden">
             <div class="absolute inset-0 bg-red-900/5 z-0"></div>
             <div class="container mx-auto px-4 relative z-10">
                 <div class="max-w-5xl mx-auto glass-panel p-4 md:p-16 rounded-3xl md:rounded-[3rem] shadow-2xl border border-red-500/20 bg-zinc-900/80 backdrop-blur-2xl">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl md:text-5xl font-bold mb-6 text-white">Angebot für Neumünster anfordern</h2>
                        <p class="text-zinc-400">Erhalten Sie in 2 Minuten einen unverbindlichen Richtpreis.</p>
                    </div>
                    <PriceCalculator client:visible />
                 </div>
             </div>
        </section>

        {/* ABOUT */}
        <About />

        {/* GALLERY */}
        <section id="gallery" class="section-spacing bg-zinc-900/20 border-y border-white/5">
             <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold text-white mb-12 text-center">Galerie</h2>
                <GalleryLightbox client:visible images={galleryImages} limit={8} />
             </div>
        </section>

        {/* FAQ */}
        <section id="faq" class="section-spacing content-auto">
            <div class="container mx-auto px-4">
                <div class="max-w-3xl mx-auto">
                    <h2 class="text-3xl font-bold text-white mb-8 text-center">Häufige Fragen</h2>
                    <FAQ client:visible items={faqItems} />
                </div>
            </div>
        </section>

    </main>
</Layout>
