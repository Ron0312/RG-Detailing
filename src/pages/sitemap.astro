---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import Breadcrumbs from '../components/Breadcrumbs.astro';
import { Map, FileText, Wrench } from 'lucide-react';

export const prerender = true;

const cities = await getCollection('cities');
const sortedCities = cities.sort((a, b) => a.data.name.localeCompare(b.data.name));

const pages = [
    { title: 'Startseite', href: '/' },
    { title: 'Leasing Rückgabe', href: '/leasing' },
    { title: 'Wohnmobil Aufbereitung', href: '/wohnmobil' },
    { title: 'Dampfreinigung', href: '/dampfreinigung' },
    { title: 'Werterhalt-Garantie', href: '/werterhalt-garantie' },
    { title: 'Glossar', href: '/glossar' },
];

const legals = [
    { title: 'Impressum', href: '/impressum' },
    { title: 'Datenschutz', href: '/datenschutz' },
    { title: 'AGB', href: '/agb' },
];
---

<Layout title="Sitemap | RG Detailing" description="Übersicht aller Seiten und Leistungen von RG Detailing.">
    <div class="relative min-h-[40vh] flex items-center justify-center overflow-hidden bg-black">
        <div class="absolute inset-0 bg-red-900/10 mix-blend-overlay"></div>
        <div class="container mx-auto px-4 z-10 text-center pt-20">
            <h1 class="text-4xl md:text-6xl font-bold mb-6 text-white">Sitemap</h1>
            <p class="text-xl text-zinc-400">Alle Seiten auf einen Blick.</p>
        </div>
    </div>

    <main class="container mx-auto px-4 py-12 -mt-20 relative z-20">
        <Breadcrumbs crumbs={[
            { label: 'Startseite', href: '/' },
            { label: 'Sitemap', href: '/sitemap' }
        ]} />

        <div class="grid md:grid-cols-3 gap-8 mt-12">
            {/* Main Pages */}
            <div class="glass-panel p-8 rounded-3xl bg-zinc-900/50 border border-white/5">
                <div class="flex items-center gap-3 mb-6 text-red-500">
                    <FileText size={24} />
                    <h2 class="text-xl font-bold text-white uppercase tracking-wider">Seiten</h2>
                </div>
                <ul class="space-y-3">
                    {pages.map(page => (
                        <li>
                            <a href={page.href} class="text-zinc-400 hover:text-white hover:translate-x-1 transition-all block">
                                {page.title}
                            </a>
                        </li>
                    ))}
                </ul>

                <div class="h-px bg-white/5 my-6"></div>

                <div class="flex items-center gap-3 mb-4 text-zinc-500">
                    <span class="text-sm font-bold uppercase tracking-wider">Rechtliches</span>
                </div>
                <ul class="space-y-3">
                    {legals.map(page => (
                        <li>
                            <a href={page.href} class="text-zinc-500 hover:text-white hover:translate-x-1 transition-all block text-sm">
                                {page.title}
                            </a>
                        </li>
                    ))}
                </ul>
            </div>

            {/* Cities */}
            <div class="md:col-span-2 glass-panel p-8 rounded-3xl bg-zinc-900/50 border border-white/5">
                <div class="flex items-center gap-3 mb-6 text-red-500">
                    <Map size={24} />
                    <h2 class="text-xl font-bold text-white uppercase tracking-wider">Einsatzgebiet & Region</h2>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    {sortedCities.map(city => (
                        <a href={`/${city.data.slug}`} class="block p-3 rounded-xl bg-white/5 hover:bg-red-900/20 hover:text-white text-zinc-400 transition-colors border border-white/5 hover:border-red-500/30 text-sm">
                            Aufbereitung {city.data.name}
                        </a>
                    ))}
                </div>
            </div>
        </div>
    </main>
</Layout>
