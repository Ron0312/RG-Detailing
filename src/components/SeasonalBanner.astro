---
import { X, CalendarClock } from 'lucide-react';
---

<div id="seasonal-banner" class="bg-gradient-to-r from-red-900 via-red-800 to-red-900 text-white relative z-[100] hidden">
    <div class="container mx-auto px-4 py-3 flex flex-col sm:flex-row items-center justify-between gap-3 text-sm">
        <div class="flex items-center gap-3 text-center sm:text-left">
            <div class="bg-white/20 p-1.5 rounded-full shrink-0 animate-pulse">
                <CalendarClock size={16} className="text-white" />
            </div>
            <p>
                <span class="font-bold uppercase tracking-wider text-red-100">Saison-Start:</span>
                <span class="ml-1 text-red-50">Sichern Sie sich jetzt Ihren Termin für den Frühjahrs-Check. Nur noch wenige Slots im {new Date().toLocaleString('de-DE', { month: 'long' })} verfügbar.</span>
            </p>
        </div>

        <div class="flex items-center gap-4 shrink-0">
            <a href="/#rechner" class="bg-white text-red-900 px-4 py-1.5 rounded-full font-bold text-xs uppercase tracking-wide hover:bg-red-50 transition-colors shadow-lg whitespace-nowrap">
                Termin prüfen
            </a>
            <button id="close-seasonal-banner" class="text-white/60 hover:text-white transition-colors" aria-label="Banner schließen">
                <X size={18} />
            </button>
        </div>
    </div>
</div>

<script is:inline>
    const banner = document.getElementById('seasonal-banner');
    const closeBtn = document.getElementById('close-seasonal-banner');
    const STORAGE_KEY = 'seasonal-banner-dismissed-v1'; // Versioned key to reshow on new campaigns

    if (!localStorage.getItem(STORAGE_KEY)) {
        banner.classList.remove('hidden');
    }

    closeBtn?.addEventListener('click', () => {
        banner.classList.add('hidden');
        localStorage.setItem(STORAGE_KEY, 'true');
    });
</script>
