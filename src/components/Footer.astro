---
import { getCollection } from 'astro:content';

const currentYear = new Date().getFullYear();
const cities = await getCollection('cities');
const sortedCities = cities.sort((a, b) => a.data.name.localeCompare(b.data.name));
---
<footer id="kontakt" class="bg-zinc-950 text-zinc-400 py-12 mt-20 border-t border-zinc-900">
    <div class="container mx-auto px-4 grid md:grid-cols-4 gap-8 mb-12">
        <div class="md:col-span-1">
            <div class="flex items-center gap-3 mb-4">
                 <img src="/logo.png" alt="RG Detailing Logo" class="h-10 w-auto" />
                 <span class="text-white font-bold text-xl">RG Detailing</span>
            </div>
            <p class="max-w-xs mb-4 text-sm leading-relaxed">Premium Fahrzeugaufbereitung, Keramikversiegelung und Lackveredelung für Schleswig-Holstein. Wir bringen den Neuwagen-Glanz zurück.</p>
        </div>
        <div>
            <h3 class="text-white font-bold text-lg mb-4">Service</h3>
            <ul class="space-y-3">
                <li><a href="/fahrzeugaufbereitung-bad-segeberg" class="hover:text-red-500 transition py-1 block">Bad Segeberg</a></li>
                <li><a href="/fahrzeugaufbereitung-kiel" class="hover:text-red-500 transition py-1 block">Kiel</a></li>
                <li><a href="/fahrzeugaufbereitung-luebeck" class="hover:text-red-500 transition py-1 block">Lübeck</a></li>
                <li><a href="/fahrzeugaufbereitung-neumuenster" class="hover:text-red-500 transition py-1 block">Neumünster</a></li>
                <li><a href="/werterhalt-garantie" class="hover:text-red-500 transition py-1 block">Werterhalt-Garantie</a></li>
                <li><a href="/#rechner" class="hover:text-red-500 transition py-1 block">Preisrechner</a></li>
            </ul>
        </div>
        <div>
            <h3 class="text-white font-bold text-lg mb-4">Kontakt</h3>
            <p>Dorfstraße 11<br/>23824 Tensfeld</p>
            <p class="mt-2 mb-4">
                <a href="https://www.google.com/maps/search/?api=1&query=28RC%2BCP+Tensfeld%2C+Deutschland" target="_blank" rel="noopener noreferrer" class="text-xs text-zinc-500 hover:text-red-500 transition flex items-center gap-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-map-pin"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
                    28RC+CP Tensfeld, Deutschland
                </a>
            </p>
            <p class="mt-4"><a href="tel:01633845081" class="text-white hover:text-red-500 font-bold py-1 block">0163 38 45 08 1</a></p>
            <p><a href="mailto:kontakt@rg-detailing.de" class="hover:text-red-500 py-1 block">kontakt@rg-detailing.de</a></p>
        </div>
        <div class="h-48 rounded-xl overflow-hidden grayscale hover:grayscale-0 transition duration-500 border border-zinc-800">
             <iframe
                src="https://maps.google.com/maps?q=RG+Detailing+Tensfeld&t=&z=13&ie=UTF8&iwloc=&output=embed"
                width="100%"
                height="100%"
                style="border:0;"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
                title="RG Detailing Standort Tensfeld"
            ></iframe>
        </div>
    </div>

    {/* Discreet SEO Links */}
    <div class="container mx-auto px-4 pt-8 border-t border-zinc-900">
        <details class="group">
            <summary class="text-xs text-zinc-700 cursor-pointer hover:text-zinc-500 transition list-none text-center select-none">
                <span class="border-b border-dashed border-zinc-800 pb-0.5">Fahrzeugaufbereitung in der Region (anzeigen)</span>
            </summary>
            <div class="flex flex-wrap justify-center gap-x-4 gap-y-2 mt-6 text-xs text-zinc-600 max-w-5xl mx-auto">
                {sortedCities.map((city) => (
                    <a href={`/${city.data.slug}`} class="hover:text-red-500 transition">
                        Aufbereitung {city.data.name}
                    </a>
                ))}
            </div>
        </details>
    </div>

    <div class="text-center mt-8 pt-8 border-t border-zinc-900 text-sm">
        <div class="flex justify-center gap-6 mb-4">
            <a href="/impressum" class="hover:text-white">Impressum</a>
            <a href="/datenschutz" class="hover:text-white">Datenschutz</a>
        </div>
        &copy; {currentYear} RG Detailing.
    </div>
</footer>
