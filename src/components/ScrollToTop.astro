---
---
<button
    id="scrollToTopBtn"
    aria-label="Nach oben scrollen"
    class="fixed bottom-24 right-6 z-40 bg-zinc-800 text-white p-3 rounded-full shadow-lg border border-zinc-700 opacity-0 translate-y-10 pointer-events-none transition-all duration-300 hover:bg-red-600 hover:border-red-500 focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:outline-none focus-visible:ring-offset-2 focus-visible:ring-offset-zinc-900"
    tabindex="-1"
    aria-hidden="true"
>
    <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m18 15-6-6-6 6"/></svg>
</button>

<script>
    const btn = document.getElementById('scrollToTopBtn');

    if (btn) {
        // OPTIMIZATION: Use IntersectionObserver instead of scroll event for better performance
        const sentinel = document.createElement('div');
        sentinel.style.position = 'absolute';
        sentinel.style.top = '0';
        sentinel.style.left = '0';
        sentinel.style.width = '1px';
        sentinel.style.height = '500px'; // Threshold for showing the button
        sentinel.style.pointerEvents = 'none';
        sentinel.style.visibility = 'hidden';
        document.body.appendChild(sentinel);

        const observer = new IntersectionObserver((entries) => {
            const entry = entries[0];
            // Show button when we've scrolled past the sentinel (it's no longer intersecting and above viewport)
            if (!entry.isIntersecting && entry.boundingClientRect.top < 0) {
                btn.classList.remove('opacity-0', 'translate-y-10', 'pointer-events-none');
                btn.removeAttribute('tabindex');
                btn.removeAttribute('aria-hidden');
            } else {
                // Hide button when we are within the first 500px
                btn.classList.add('opacity-0', 'translate-y-10', 'pointer-events-none');
                btn.setAttribute('tabindex', '-1');
                btn.setAttribute('aria-hidden', 'true');
            }
        });

        observer.observe(sentinel);

        btn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    }
</script>
