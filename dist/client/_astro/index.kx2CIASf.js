import{r as n}from"./index.WFquGv8Z.js";import{r as hn}from"./index.ZX95bEFL.js";const Nt="carousel",Ot="controller",mn="navigation",pn="no-scroll",He="portal",gn="root",Rt="toolbar",mt="zoom",Ze="loading",We="error",$e="complete",vn="placeholder",En=e=>`active-slide-${e}`,bn="fullsize",Ke="flex_center",wn="no_scroll",Tt="no_scroll_padding",je="slide",Dt="slide_wrapper",xn="slide_wrapper_interactive",ue="prev",de="next",pt="swipe",pe="close",kt="onPointerDown",At="onPointerMove",Zt="onPointerUp",Wt="onPointerLeave",$t="onPointerCancel",Ge="onKeyDown",Cn="onKeyUp",qe="onWheel",_n="Escape",Pn="ArrowLeft",Sn="ArrowRight",Mn="button",Xe="icon",Ft="contain",gt="cover",Vt="Unknown action type";var In=hn();const Ut="yarl__";function oe(...e){return[...e].filter(Boolean).join(" ")}function N(e){return`${Ut}${e}`}function K(e){return`--${Ut}${e}`}function xe(e,t){return`${e}${t?`_${t}`:""}`}function Qe(e){return t=>xe(e,t)}function ge(e,t){var r;return(r=e?.[t])!==null&&r!==void 0?r:t}function yn(e,t,r){return ge(e,"{index} of {total}").replace(/\{index}/g,`${ot(r,t.length)+1}`).replace(/\{total}/g,`${t.length}`)}function Je(...e){return()=>{e.forEach(t=>{t()})}}function ie(e,t,r){return()=>{const o=n.useContext(r);if(!o)throw new Error(`${e} must be used within a ${t}.Provider`);return o}}function et(){return typeof window<"u"}function tt(e,t=0){const r=10**t;return Math.round((e+Number.EPSILON)*r)/r}function ve(e){return e.type===void 0||e.type==="image"}function nt(e,t){return e.imageFit===gt||e.imageFit!==Ft&&t===gt}function Ie(e){return typeof e=="string"?Number.parseInt(e,10):e}function Se(e){if(typeof e=="number")return{pixel:e};if(typeof e=="string"){const t=Ie(e);return e.endsWith("%")?{percent:t}:{pixel:t}}return{pixel:0}}function Ln(e,t){const r=Se(t),o=r.percent!==void 0?e.width/100*r.percent:r.pixel;return{width:Math.max(e.width-2*o,0),height:Math.max(e.height-2*o,0)}}function Nn(){return(et()?window?.devicePixelRatio:void 0)||1}function ot(e,t){return t>0?(e%t+t)%t:0}function Xt(e){return e.length>0}function Yt(e,t){return e[ot(t,e.length)]}function Ye(e,t){return Xt(e)?Yt(e,t):void 0}function On(e){return ve(e)?e.src:void 0}function Rn(e,t,r){if(!r)return e;const{buttons:o,...i}=e,c=o.findIndex(l=>l===t),s=n.isValidElement(r)?n.cloneElement(r,{key:t},null):r;if(c>=0){const l=[...o];return l.splice(c,1,s),{buttons:l,...i}}return{buttons:[s,...o],...i}}function Tn(e,t,r=0){return Math.min(e.preload,Math.max(e.finite?t.length-1:Math.floor(t.length/2),r))}const Dn=Number(n.version.split(".")[0])>=19;function kn(e){return{inert:Dn?e:e?"":void 0}}function An(e){e.scrollTop}const ze={open:!1,close:()=>{},index:0,slides:[],render:{},plugins:[],toolbar:{buttons:[pe]},labels:{},animation:{fade:250,swipe:500,easing:{fade:"ease",swipe:"ease-out",navigation:"ease-in-out"}},carousel:{finite:!1,preload:2,padding:"16px",spacing:"30%",imageFit:Ft,imageProps:{}},controller:{ref:null,focus:!0,aria:!1,touchAction:"none",closeOnPullUp:!1,closeOnPullDown:!1,closeOnBackdropClick:!1,preventDefaultWheelX:!0,preventDefaultWheelY:!1,disableSwipeNavigation:!1},portal:{},noScroll:{disabled:!1},on:{},styles:{},className:""};function se(e,t){return{name:e,component:t}}function Y(e,t){return{module:e,children:t}}function zt(e,t,r){return e.module.name===t?r(e):e.children?[Y(e.module,e.children.flatMap(o=>{var i;return(i=zt(o,t,r))!==null&&i!==void 0?i:[]}))]:[e]}function me(e,t,r){return e.flatMap(o=>{var i;return(i=zt(o,t,r))!==null&&i!==void 0?i:[]})}function Zn(e,t=[],r=[]){let o=e;const i=f=>{const g=[...o];for(;g.length>0;){const m=g.pop();if(m?.module.name===f)return!0;m?.children&&g.push(...m.children)}return!1},c=(f,g)=>{if(f===""){o=[Y(g,o)];return}o=me(o,f,m=>[Y(g,[m])])},s=(f,g)=>{o=me(o,f,m=>[Y(m.module,[Y(g,m.children)])])},l=(f,g,m)=>{o=me(o,f,x=>{var w;return[Y(x.module,[...m?[Y(g)]:[],...(w=x.children)!==null&&w!==void 0?w:[],...m?[]:[Y(g)]])]})},a=(f,g,m)=>{o=me(o,f,x=>[...m?[Y(g)]:[],x,...m?[]:[Y(g)]])},d=f=>{s(Ot,f)},p=(f,g)=>{o=me(o,f,m=>[Y(g,m.children)])},u=f=>{o=me(o,f,g=>g.children)},h=f=>{r.push(f)};return t.forEach(f=>{f({contains:i,addParent:c,append:s,addChild:l,addSibling:a,addModule:d,replace:p,remove:u,augment:h})}),{config:o,augmentation:f=>r.reduce((g,m)=>m(g),f)}}const Bt=n.createContext(null),Ht=ie("useA11yContext","A11yContext",Bt);function Wn({children:e}){const[t,r]=n.useState(!1),[o,i]=n.useState(!1),c=n.useMemo(()=>({focusWithin:t,trackFocusWithin:(l,a)=>{const d=p=>u=>{var h;u.currentTarget.contains(u.relatedTarget)||r(p),(h=p?l:a)===null||h===void 0||h(u)};return{onFocus:d(!0),onBlur:d(!1)}},autoPlaying:o,setAutoPlaying:i}),[t,o]);return n.createElement(Bt.Provider,{value:c},e)}const Kt=n.createContext(null),ye=ie("useDocument","DocumentContext",Kt);function $n({nodeRef:e,children:t}){const r=n.useMemo(()=>{const o=c=>{var s;return((s=c||e.current)===null||s===void 0?void 0:s.ownerDocument)||document};return{getOwnerDocument:o,getOwnerWindow:c=>{var s;return((s=o(c))===null||s===void 0?void 0:s.defaultView)||window}}},[e]);return n.createElement(Kt.Provider,{value:r},t)}const jt=n.createContext(null),Le=ie("useEvents","EventsContext",jt);function Fn({children:e}){const[t]=n.useState({});n.useEffect(()=>()=>{Object.keys(t).forEach(o=>delete t[o])},[t]);const r=n.useMemo(()=>{const o=(s,l)=>{var a;(a=t[s])===null||a===void 0||a.splice(0,t[s].length,...t[s].filter(d=>d!==l))};return{publish:(...[s,l])=>{var a;(a=t[s])===null||a===void 0||a.forEach(d=>d(l))},subscribe:(s,l)=>(t[s]||(t[s]=[]),t[s].push(l),()=>o(s,l)),unsubscribe:o}},[t]);return n.createElement(jt.Provider,{value:r},e)}const Gt=n.createContext(null),G=ie("useLightboxProps","LightboxPropsContext",Gt);function Vn({children:e,...t}){return n.createElement(Gt.Provider,{value:t},e)}const qt=n.createContext(null),le=ie("useLightboxState","LightboxStateContext",qt),Qt=n.createContext(null),Un=ie("useLightboxDispatch","LightboxDispatchContext",Qt);function Xn(e,t){switch(t.type){case"swipe":{const{slides:r}=e,o=t?.increment||0,i=e.globalIndex+o,c=ot(i,r.length),s=Ye(r,c),l=o||t.duration!==void 0?{increment:o,duration:t.duration,easing:t.easing}:void 0;return{slides:r,currentIndex:c,globalIndex:i,currentSlide:s,animation:l}}case"update":return t.slides!==e.slides||t.index!==e.currentIndex?{slides:t.slides,currentIndex:t.index,globalIndex:t.index,currentSlide:Ye(t.slides,t.index)}:e;default:throw new Error(Vt)}}function Yn({slides:e,index:t,children:r}){const[o,i]=n.useReducer(Xn,{slides:e,currentIndex:t,globalIndex:t,currentSlide:Ye(e,t)});n.useEffect(()=>{i({type:"update",slides:e,index:t})},[e,t]);const c=n.useMemo(()=>({...o,state:o,dispatch:i}),[o,i]);return n.createElement(Qt.Provider,{value:i},n.createElement(qt.Provider,{value:c},r))}const Jt=n.createContext(null),Ne=ie("useTimeouts","TimeoutsContext",Jt);function zn({children:e}){const[t]=n.useState([]);n.useEffect(()=>()=>{t.forEach(o=>window.clearTimeout(o)),t.splice(0,t.length)},[t]);const r=n.useMemo(()=>{const o=s=>{t.splice(0,t.length,...t.filter(l=>l!==s))};return{setTimeout:(s,l)=>{const a=window.setTimeout(()=>{o(a),s()},l);return t.push(a),a},clearTimeout:s=>{s!==void 0&&(o(s),window.clearTimeout(s))}}},[t]);return n.createElement(Jt.Provider,{value:r},e)}const rt=n.forwardRef(function({label:t,className:r,icon:o,renderIcon:i,onClick:c,style:s,...l},a){const{styles:d,labels:p}=G(),u=ge(p,t);return n.createElement("button",{ref:a,type:"button",title:u,"aria-label":u,className:oe(N(Mn),r),onClick:c,style:{...s,...d.button},...l},i?i():n.createElement(o,{className:N(Xe),style:d.icon}))});function Bn(e,t){const r=o=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false",...o},t);return r.displayName=e,r}function fe(e,t){return Bn(e,n.createElement("g",{fill:"currentColor"},n.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),t))}const Hn=fe("Close",n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Kn=fe("Previous",n.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),jn=fe("Next",n.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),Gn=fe("Loading",n.createElement(n.Fragment,null,Array.from({length:8}).map((e,t,r)=>n.createElement("line",{key:t,x1:"12",y1:"6.5",x2:"12",y2:"1.8",strokeLinecap:"round",strokeWidth:"2.6",stroke:"currentColor",strokeOpacity:1/r.length*(t+1),transform:`rotate(${360/r.length*t}, 12, 12)`})))),qn=fe("Error",n.createElement("path",{d:"M21.9,21.9l-8.49-8.49l0,0L3.59,3.59l0,0L2.1,2.1L0.69,3.51L3,5.83V19c0,1.1,0.9,2,2,2h13.17l2.31,2.31L21.9,21.9z M5,18 l3.5-4.5l2.5,3.01L12.17,15l3,3H5z M21,18.17L5.83,3H19c1.1,0,2,0.9,2,2V18.17z"})),re=et()?n.useLayoutEffect:n.useEffect;function it(){const[e,t]=n.useState(!1);return n.useEffect(()=>{var r,o;const i=(r=window.matchMedia)===null||r===void 0?void 0:r.call(window,"(prefers-reduced-motion: reduce)");t(i?.matches);const c=s=>t(s.matches);return(o=i?.addEventListener)===null||o===void 0||o.call(i,"change",c),()=>{var s;return(s=i?.removeEventListener)===null||s===void 0?void 0:s.call(i,"change",c)}},[]),e}function Qn(e){let t=0,r=0,o=0;const c=window.getComputedStyle(e).transform.match(/matrix.*\((.+)\)/);if(c){const s=c[1].split(",").map(Ie);s.length===6?(t=s[4],r=s[5]):s.length===16&&(t=s[12],r=s[13],o=s[14])}return{x:t,y:r,z:o}}function vt(e,t){const r=n.useRef(void 0),o=n.useRef(void 0),i=it();return re(()=>{var c,s,l;if(e.current&&r.current!==void 0&&!i){const{keyframes:a,duration:d,easing:p,onfinish:u}=t(r.current,e.current.getBoundingClientRect(),Qn(e.current))||{};if(a&&d){(c=o.current)===null||c===void 0||c.cancel(),o.current=void 0;try{o.current=(l=(s=e.current).animate)===null||l===void 0?void 0:l.call(s,a,{duration:d,easing:p})}catch(h){console.error(h)}o.current&&(o.current.onfinish=()=>{o.current=void 0,u?.()})}}r.current=void 0}),{prepareAnimation:c=>{r.current=c},isAnimationPlaying:()=>{var c;return((c=o.current)===null||c===void 0?void 0:c.playState)==="running"}}}function en(){const e=n.useRef(null),t=n.useRef(void 0),[r,o]=n.useState();return{setContainerRef:n.useCallback(c=>{e.current=c,t.current&&(t.current.disconnect(),t.current=void 0);const s=()=>{if(c){const l=window.getComputedStyle(c),a=d=>parseFloat(d)||0;o({width:Math.round(c.clientWidth-a(l.paddingLeft)-a(l.paddingRight)),height:Math.round(c.clientHeight-a(l.paddingTop)-a(l.paddingBottom))})}else o(void 0)};s(),c&&typeof ResizeObserver<"u"&&(t.current=new ResizeObserver(s),t.current.observe(c))},[]),containerRef:e,containerRect:r}}function Pe(){const e=n.useRef(void 0),{setTimeout:t,clearTimeout:r}=Ne();return n.useCallback((o,i)=>{r(e.current),e.current=t(o,i>0?i:0)},[t,r])}function D(e){const t=n.useRef(e);return re(()=>{t.current=e}),n.useCallback((...r)=>{var o;return(o=t.current)===null||o===void 0?void 0:o.call(t,...r)},[])}function Et(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Be(e,t){return n.useMemo(()=>e==null&&t==null?null:r=>{Et(e,r),Et(t,r)},[e,t])}function Jn(e,t=!1){const r=n.useRef(!1);re(()=>{t&&r.current&&(r.current=!1,e())},[t,e]);const o=n.useCallback(()=>{r.current=!0},[]),i=n.useCallback(()=>{r.current=!1},[]);return{onFocus:o,onBlur:i}}function ct(){const[e,t]=n.useState(!1);return re(()=>{t(window.getComputedStyle(window.document.documentElement).direction==="rtl")},[]),e}function eo(){const[e]=n.useState({}),t=n.useCallback((i,c)=>{var s;(s=e[i])===null||s===void 0||s.forEach(l=>{c.isPropagationStopped()||l(c)})},[e]),r=n.useMemo(()=>({onPointerDown:i=>t(kt,i),onPointerMove:i=>t(At,i),onPointerUp:i=>t(Zt,i),onPointerLeave:i=>t(Wt,i),onPointerCancel:i=>t($t,i),onKeyDown:i=>t(Ge,i),onKeyUp:i=>t(Cn,i),onWheel:i=>t(qe,i)}),[t]),o=n.useCallback((i,c)=>(e[i]||(e[i]=[]),e[i].unshift(c),()=>{const s=e[i];s&&s.splice(0,s.length,...s.filter(l=>l!==c))}),[e]);return{registerSensors:r,subscribeSensors:o}}function bt(e,t){const r=n.useRef(0),o=Pe(),i=D((...c)=>{r.current=Date.now(),e(c)});return n.useCallback((...c)=>{o(()=>{i(c)},t-(Date.now()-r.current))},[t,i,o])}const Fe=Qe("slide"),Ve=Qe("slide_image");function Me({slide:e,offset:t,render:r,rect:o,imageFit:i,imageProps:c,onClick:s,onLoad:l,onError:a,style:d}){var p,u,h,f,g,m,x,w;const[C,_]=n.useState(Ze),{publish:T}=Le(),{setTimeout:y}=Ne(),M=n.useRef(null);n.useEffect(()=>{t===0&&T(En(C))},[t,C,T]);const E=D(S=>{("decode"in S?S.decode():Promise.resolve()).catch(()=>{}).then(()=>{S.parentNode&&(_($e),y(()=>{l?.(S)},0))})}),k=n.useCallback(S=>{M.current=S,S?.complete&&E(S)},[E]),I=n.useCallback(S=>{E(S.currentTarget)},[E]),F=D(()=>{_(We),a?.()}),R=nt(e,i),W=(S,z)=>Number.isFinite(S)?S:z,P=W(Math.max(...((u=(p=e.srcSet)===null||p===void 0?void 0:p.map(S=>S.width))!==null&&u!==void 0?u:[]).concat(e.width?[e.width]:[]).filter(Boolean)),((h=M.current)===null||h===void 0?void 0:h.naturalWidth)||0),A=W(Math.max(...((g=(f=e.srcSet)===null||f===void 0?void 0:f.map(S=>S.height))!==null&&g!==void 0?g:[]).concat(e.height?[e.height]:[]).filter(Boolean)),((m=M.current)===null||m===void 0?void 0:m.naturalHeight)||0),O=P&&A?{maxWidth:`min(${P}px, 100%)`,maxHeight:`min(${A}px, 100%)`}:{maxWidth:"100%",maxHeight:"100%"},V=(x=e.srcSet)===null||x===void 0?void 0:x.sort((S,z)=>S.width-z.width).map(S=>`${S.src} ${S.width}w`).join(", "),$=()=>o&&!R&&e.width&&e.height?o.height/e.height*e.width:Number.MAX_VALUE,b=V&&o&&et()?`${Math.round(Math.min($(),o.width))}px`:void 0,{style:L,className:X,...U}=c||{};return n.createElement(n.Fragment,null,n.createElement("img",{ref:k,onLoad:I,onError:F,onClick:s,draggable:!1,className:oe(N(Ve()),R&&N(Ve("cover")),C!==$e&&N(Ve("loading")),X),style:{...O,...d,...L},...U,alt:(w=e.alt)!==null&&w!==void 0?w:"",sizes:b,srcSet:V,src:e.src}),C!==$e&&n.createElement("div",{className:N(Fe(vn))},C===Ze&&(r?.iconLoading?r.iconLoading():n.createElement(Gn,{className:oe(N(Xe),N(Fe(Ze)))})),C===We&&(r?.iconError?r.iconError():n.createElement(qn,{className:oe(N(Xe),N(Fe(We)))}))))}const to=n.forwardRef(function({className:t,children:r,onFocus:o,onBlur:i,...c},s){const l=n.useRef(null),{trackFocusWithin:a}=Ht();return n.createElement($n,{nodeRef:l},n.createElement("div",{ref:Be(s,l),className:oe(N("root"),t),...a(o,i),...c},r))});var B;(function(e){e[e.NONE=0]="NONE",e[e.SWIPE=1]="SWIPE",e[e.PULL=2]="PULL",e[e.ANIMATION=3]="ANIMATION"})(B||(B={}));function tn(e,t,r,o,i){n.useEffect(()=>i?()=>{}:Je(e(kt,t),e(At,r),e(Zt,o),e(Wt,o),e($t,o)),[e,t,r,o,i])}var Q;(function(e){e[e.NONE=0]="NONE",e[e.SWIPE=1]="SWIPE",e[e.PULL=2]="PULL"})(Q||(Q={}));const Ue=30;function no({disableSwipeNavigation:e,closeOnBackdropClick:t},r,o,i,c,s,l,a,d,p,u,h,f,g,m,x){const w=n.useRef(0),C=n.useRef([]),_=n.useRef(void 0),T=n.useRef(0),y=n.useRef(Q.NONE),M=n.useCallback(P=>{_.current===P.pointerId&&(_.current=void 0,y.current=Q.NONE);const A=C.current;A.splice(0,A.length,...A.filter(O=>O.pointerId!==P.pointerId))},[]),E=n.useCallback(P=>{M(P),P.persist(),C.current.push(P)},[M]),k=n.useCallback(P=>C.current.find(({pointerId:A})=>P.pointerId===A),[]),I=D(P=>{E(P)}),F=(P,A)=>u&&P>A||p&&P<-A,R=D(P=>{const A=k(P);if(A)if(_.current===P.pointerId){const O=Date.now()-T.current,V=w.current;y.current===Q.SWIPE?Math.abs(V)>.3*i||Math.abs(V)>5&&O<c?a(V,O):d(V):y.current===Q.PULL&&(F(V,2*Ue)?g(V,O):m(V)),w.current=0,y.current=Q.NONE}else{const{target:O}=P;t&&O instanceof HTMLElement&&O===A.target&&(O.classList.contains(N(je))||O.classList.contains(N(Dt)))&&x()}M(P)}),W=D(P=>{const A=k(P);if(A){const O=_.current===P.pointerId;if(P.buttons===0){O&&w.current!==0?R(P):M(A);return}const V=P.clientX-A.clientX,$=P.clientY-A.clientY;if(_.current===void 0){const b=L=>{E(P),_.current=P.pointerId,T.current=Date.now(),y.current=L};Math.abs(V)>Math.abs($)&&Math.abs(V)>Ue&&o(V)?e||(b(Q.SWIPE),s()):Math.abs($)>Math.abs(V)&&F($,Ue)&&(b(Q.PULL),h())}else O&&(y.current===Q.SWIPE?(w.current=V,l(V)):y.current===Q.PULL&&(w.current=$,f($)))}});tn(r,I,W,R)}function oo({preventDefaultWheelX:e,preventDefaultWheelY:t}){const r=n.useRef(null),o=D(i=>{const c=Math.abs(i.deltaX)>Math.abs(i.deltaY);(c&&e||!c&&t||i.ctrlKey)&&i.preventDefault()});return n.useCallback(i=>{var c;i?i.addEventListener("wheel",o,{passive:!1}):(c=r.current)===null||c===void 0||c.removeEventListener("wheel",o),r.current=i},[o])}function ro(e,t,r,o,i,c,s,l,a){const d=n.useRef(0),p=n.useRef(0),u=n.useRef(void 0),h=n.useRef(void 0),f=n.useRef(0),g=n.useRef(void 0),m=n.useRef(0),{setTimeout:x,clearTimeout:w}=Ne(),C=n.useCallback(()=>{u.current&&(w(u.current),u.current=void 0)},[w]),_=n.useCallback(()=>{h.current&&(w(h.current),h.current=void 0)},[w]),T=D(()=>{e!==B.SWIPE&&(d.current=0,m.current=0,C(),_())});n.useEffect(T,[e,T]);const y=D(E=>{h.current=void 0,d.current===E&&a(d.current)}),M=D(E=>{if(E.ctrlKey||Math.abs(E.deltaY)>Math.abs(E.deltaX))return;const k=I=>{f.current=I,w(g.current),g.current=I>0?x(()=>{f.current=0,g.current=void 0},300):void 0};if(e===B.NONE){if(Math.abs(E.deltaX)<=1.2*Math.abs(f.current)){k(E.deltaX);return}if(!r(-E.deltaX))return;if(p.current+=E.deltaX,C(),Math.abs(p.current)>30)p.current=0,k(0),m.current=Date.now(),c();else{const I=p.current;u.current=x(()=>{u.current=void 0,I===p.current&&(p.current=0)},i)}}else if(e===B.SWIPE){let I=d.current-E.deltaX;if(I=Math.min(Math.abs(I),o)*Math.sign(I),d.current=I,s(I),_(),Math.abs(I)>.2*o){k(E.deltaX),l(I,Date.now()-m.current);return}h.current=x(()=>y(I),2*i)}else k(E.deltaX)});n.useEffect(()=>t(qe,M),[t,M])}const wt=Qe("container"),nn=n.createContext(null),ce=ie("useController","ControllerContext",nn);function io({children:e,...t}){var r;const{carousel:o,animation:i,controller:c,on:s,styles:l,render:a}=t,{closeOnPullUp:d,closeOnPullDown:p,preventDefaultWheelX:u,preventDefaultWheelY:h}=c,[f,g]=n.useState(),m=le(),x=Un(),[w,C]=n.useState(B.NONE),_=n.useRef(0),T=n.useRef(0),y=n.useRef(1),{registerSensors:M,subscribeSensors:E}=eo(),{subscribe:k,publish:I}=Le(),F=Pe(),R=Pe(),W=Pe(),{containerRef:P,setContainerRef:A,containerRect:O}=en(),V=Be(oo({preventDefaultWheelX:u,preventDefaultWheelY:h}),A),$=n.useRef(null),b=Be($,void 0),{getOwnerDocument:L}=ye(),X=ct(),U=v=>(X?-1:1)*(typeof v=="number"?v:1),S=D(()=>{var v;return(v=P.current)===null||v===void 0?void 0:v.focus()}),z=D(()=>t),q=D(()=>m),J=n.useCallback(v=>I(ue,v),[I]),ee=n.useCallback(v=>I(de,v),[I]),he=n.useCallback(()=>I(pe),[I]),Re=v=>!(o.finite&&(U(v)>0&&m.currentIndex===0||U(v)<0&&m.currentIndex===m.slides.length-1)),lt=v=>{var Z;_.current=v,(Z=P.current)===null||Z===void 0||Z.style.setProperty(K("swipe_offset"),`${Math.round(v)}px`)},Te=v=>{var Z,H;T.current=v,y.current=(()=>{const be=p&&v>0?v:d&&v<0?-v:0;return Math.min(Math.max(tt(1-be/60*(1-.5),2),.5),1)})(),(Z=P.current)===null||Z===void 0||Z.style.setProperty(K("pull_offset"),`${Math.round(v)}px`),(H=P.current)===null||H===void 0||H.style.setProperty(K("pull_opacity"),`${y.current}`)},{prepareAnimation:ln}=vt($,(v,Z,H)=>{if($.current&&O)return{keyframes:[{transform:`translate(0, ${v.rect.y-Z.y+H.y}px)`,opacity:v.opacity},{transform:"translate(0, 0)",opacity:1}],duration:v.duration,easing:i.easing.fade}}),at=(v,Z)=>{if(d||p){Te(v);let H=0;$.current&&(H=i.fade*(Z?2:1),ln({rect:$.current.getBoundingClientRect(),opacity:y.current,duration:H})),W(()=>{Te(0),C(B.NONE)},H),C(B.ANIMATION),Z||he()}},{prepareAnimation:an,isAnimationPlaying:un}=vt($,(v,Z,H)=>{var te;if($.current&&O&&(!((te=m.animation)===null||te===void 0)&&te.duration)){const j=Se(o.spacing),be=(j.percent?j.percent*O.width/100:j.pixel)||0;return{keyframes:[{transform:`translate(${U(m.globalIndex-v.index)*(O.width+be)+v.rect.x-Z.x+H.x}px, 0)`},{transform:"translate(0, 0)"}],duration:m.animation.duration,easing:m.animation.easing}}}),Ee=D(v=>{var Z,H;const te=v.offset||0,j=te?i.swipe:(Z=i.navigation)!==null&&Z!==void 0?Z:i.swipe,be=!te&&!un()?i.easing.navigation:i.easing.swipe;let{direction:Ce}=v;const _e=(H=v.count)!==null&&H!==void 0?H:1;let De=B.ANIMATION,ne=j*_e;if(!Ce){const we=O?.width,ht=v.duration||0,Ae=we?j/we*Math.abs(te):j;_e!==0?(ht<Ae?ne=ne/Ae*Math.max(ht,Ae/5):we&&(ne=j/we*(we-Math.abs(te))),Ce=U(te)>0?ue:de):ne=j/2}let ke=0;Ce===ue?Re(U(1))?ke=-_e:(De=B.NONE,ne=j):Ce===de&&(Re(U(-1))?ke=_e:(De=B.NONE,ne=j)),ne=Math.round(ne),R(()=>{lt(0),C(B.NONE)},ne),$.current&&an({rect:$.current.getBoundingClientRect(),index:m.globalIndex}),C(De),I(pt,{type:"swipe",increment:ke,duration:ne,easing:be})});n.useEffect(()=>{var v,Z;!((v=m.animation)===null||v===void 0)&&v.increment&&(!((Z=m.animation)===null||Z===void 0)&&Z.duration)&&F(()=>x({type:"swipe",increment:0}),m.animation.duration)},[m.animation,x,F]);const ut=[E,Re,O?.width||0,i.swipe,()=>C(B.SWIPE),v=>lt(v),(v,Z)=>Ee({offset:v,duration:Z,count:1}),v=>Ee({offset:v,count:0})],dn=[()=>{p&&C(B.PULL)},v=>Te(v),v=>at(v),v=>at(v,!0)];no(c,...ut,d,p,...dn,he),ro(w,...ut);const dt=D(()=>{c.focus&&L().querySelector(`.${N(He)} .${N(wt())}`)&&S()});n.useEffect(dt,[dt]);const ft=D(()=>{var v;(v=s.view)===null||v===void 0||v.call(s,{index:m.currentIndex})});n.useEffect(ft,[m.globalIndex,ft]),n.useEffect(()=>Je(k(ue,v=>Ee({direction:ue,...v})),k(de,v=>Ee({direction:de,...v})),k(pt,v=>x(v))),[k,Ee,x]);const fn=n.useMemo(()=>({prev:J,next:ee,close:he,focus:S,slideRect:O?Ln(O,o.padding):{width:0,height:0},containerRect:O||{width:0,height:0},subscribeSensors:E,containerRef:P,setCarouselRef:b,toolbarWidth:f,setToolbarWidth:g}),[J,ee,he,S,E,O,P,b,f,g,o.padding]);return n.useImperativeHandle(c.ref,()=>({prev:J,next:ee,close:he,focus:S,getLightboxProps:z,getLightboxState:q}),[J,ee,he,S,z,q]),n.createElement("div",{ref:V,className:oe(N(wt()),N(Ke)),style:{...w===B.SWIPE?{[K("swipe_offset")]:`${Math.round(_.current)}px`}:null,...w===B.PULL?{[K("pull_offset")]:`${Math.round(T.current)}px`,[K("pull_opacity")]:`${y.current}`}:null,...c.touchAction!=="none"?{[K("controller_touch_action")]:c.touchAction}:null,...l.container},tabIndex:-1,...M},O&&n.createElement(nn.Provider,{value:fn},e,(r=a.controls)===null||r===void 0?void 0:r.call(a)))}const co=se(Ot,io);function ae(e){return xe(Nt,e)}function xt(e){return xe(je,e)}function so({slide:e,offset:t}){const r=n.useRef(null),{currentIndex:o,slides:i}=le(),{slideRect:c,focus:s}=ce(),{render:l,carousel:{imageFit:a,imageProps:d},on:{click:p},styles:{slide:u},labels:h}=G(),{getOwnerDocument:f}=ye(),g=t!==0;n.useEffect(()=>{var x;g&&(!((x=r.current)===null||x===void 0)&&x.contains(f().activeElement))&&s()},[g,s,f]);const m=()=>{var x,w,C,_;let T=(x=l.slide)===null||x===void 0?void 0:x.call(l,{slide:e,offset:t,rect:c});return!T&&ve(e)&&(T=n.createElement(Me,{slide:e,offset:t,render:l,rect:c,imageFit:a,imageProps:d,onClick:g?void 0:()=>p?.({index:o})})),T?n.createElement(n.Fragment,null,(w=l.slideHeader)===null||w===void 0?void 0:w.call(l,{slide:e}),((C=l.slideContainer)!==null&&C!==void 0?C:(({children:y})=>y))({slide:e,children:T}),(_=l.slideFooter)===null||_===void 0?void 0:_.call(l,{slide:e})):null};return n.createElement("div",{ref:r,className:oe(N(xt()),!g&&N(xt("current")),N(Ke)),...kn(g),style:u,role:"group","aria-roledescription":ge(h,"Slide"),"aria-label":yn(h,i,o+t)},m())}function lo(){const e=G().styles.slide;return n.createElement("div",{className:N(je),style:e})}function ao({carousel:e,labels:t}){const{slides:r,currentIndex:o,globalIndex:i}=le(),{setCarouselRef:c}=ce(),{autoPlaying:s,focusWithin:l}=Ht(),a=Se(e.spacing),d=Se(e.padding),p=Tn(e,r,1),u=[];if(Xt(r))for(let h=o-p;h<=o+p;h+=1){const f=Yt(r,h),g=i-o+h,m=e.finite&&(h<0||h>r.length-1);u.push(m?{key:g}:{key:[`${g}`,On(f)].filter(Boolean).join("|"),offset:h-o,slide:f})}return n.createElement("div",{ref:c,className:oe(N(ae()),u.length>0&&N(ae("with_slides"))),style:{[`${K(ae("slides_count"))}`]:u.length,[`${K(ae("spacing_px"))}`]:a.pixel||0,[`${K(ae("spacing_percent"))}`]:a.percent||0,[`${K(ae("padding_px"))}`]:d.pixel||0,[`${K(ae("padding_percent"))}`]:d.percent||0},role:"region","aria-live":s&&!l?"off":"polite","aria-roledescription":ge(t,"Carousel"),"aria-label":ge(t,"Photo gallery")},u.map(({key:h,slide:f,offset:g})=>f?n.createElement(so,{key:h,slide:f,offset:g}):n.createElement(lo,{key:h})))}const uo=se(Nt,ao);function on(){const{carousel:e}=G(),{slides:t,currentIndex:r}=le(),o=t.length===0||e.finite&&r===0,i=t.length===0||e.finite&&r===t.length-1;return{prevDisabled:o,nextDisabled:i}}function fo(e){var t;const r=ct(),{publish:o}=Le(),{animation:i}=G(),{prevDisabled:c,nextDisabled:s}=on(),l=((t=i.navigation)!==null&&t!==void 0?t:i.swipe)/2,a=bt(()=>o(ue),l),d=bt(()=>o(de),l),p=D(u=>{switch(u.key){case _n:o(pe);break;case Pn:(r?s:c)||(r?d:a)();break;case Sn:(r?c:s)||(r?a:d)();break}});n.useEffect(()=>e(Ge,p),[e,p])}function Ct({label:e,icon:t,renderIcon:r,action:o,onClick:i,disabled:c,style:s}){return n.createElement(rt,{label:e,icon:t,renderIcon:r,className:N(`navigation_${o}`),disabled:c,onClick:i,style:s,...Jn(ce().focus,c)})}function ho({render:{buttonPrev:e,buttonNext:t,iconPrev:r,iconNext:o},styles:i}){const{prev:c,next:s,subscribeSensors:l}=ce(),{prevDisabled:a,nextDisabled:d}=on();return fo(l),n.createElement(n.Fragment,null,e?e():n.createElement(Ct,{label:"Previous",action:ue,icon:Kn,renderIcon:r,style:i.navigationPrev,disabled:a,onClick:c}),t?t():n.createElement(Ct,{label:"Next",action:de,icon:jn,renderIcon:o,style:i.navigationNext,disabled:d,onClick:s}))}const mo=se(mn,ho),_t=N(wn),po=N(Tt);function go(e){return"style"in e}function Pt(e,t,r){const o=window.getComputedStyle(e),i=r?"padding-left":"padding-right",c=r?o.paddingLeft:o.paddingRight,s=e.style.getPropertyValue(i);return e.style.setProperty(i,`${(Ie(c)||0)+t}px`),()=>{s?e.style.setProperty(i,s):e.style.removeProperty(i)}}function vo({noScroll:{disabled:e},children:t}){const r=ct(),{getOwnerDocument:o,getOwnerWindow:i}=ye();return n.useEffect(()=>{if(e)return()=>{};const c=[],s=i(),{body:l,documentElement:a}=o(),d=Math.round(s.innerWidth-a.clientWidth);if(d>0){c.push(Pt(l,d,r));const p=l.getElementsByTagName("*");for(let u=0;u<p.length;u+=1){const h=p[u];go(h)&&s.getComputedStyle(h).getPropertyValue("position")==="fixed"&&!h.classList.contains(po)&&c.push(Pt(h,d,r))}}return l.classList.add(_t),()=>{l.classList.remove(_t),c.forEach(p=>p())}},[r,e,o,i]),n.createElement(n.Fragment,null,t)}const Eo=se(pn,vo);function St(e){return xe(He,e)}function Mt(e,t,r){const o=e.getAttribute(t);return e.setAttribute(t,r),()=>{o?e.setAttribute(t,o):e.removeAttribute(t)}}function bo({children:e,animation:t,styles:r,className:o,on:i,portal:c,close:s,labels:l}){const[a,d]=n.useState(!1),[p,u]=n.useState(!1),h=n.useRef([]),f=n.useRef(null),{setTimeout:g}=Ne(),{subscribe:m}=Le(),w=it()?0:t.fade;n.useEffect(()=>(d(!0),()=>{d(!1),u(!1)}),[]);const C=D(()=>{h.current.forEach(M=>M()),h.current=[]}),_=D(()=>{var M;u(!1),C(),(M=i.exiting)===null||M===void 0||M.call(i),g(()=>{var E;(E=i.exited)===null||E===void 0||E.call(i),s()},w)});n.useEffect(()=>m(pe,_),[m,_]);const T=D(M=>{var E,k,I;An(M),u(!0),(E=i.entering)===null||E===void 0||E.call(i);const F=(I=(k=M.parentNode)===null||k===void 0?void 0:k.children)!==null&&I!==void 0?I:[];for(let R=0;R<F.length;R+=1){const W=F[R];["TEMPLATE","SCRIPT","STYLE"].indexOf(W.tagName)===-1&&W!==M&&(h.current.push(Mt(W,"inert","")),h.current.push(Mt(W,"aria-hidden","true")))}h.current.push(()=>{var R,W;(W=(R=f.current)===null||R===void 0?void 0:R.focus)===null||W===void 0||W.call(R)}),g(()=>{var R;(R=i.entered)===null||R===void 0||R.call(i)},w)}),y=n.useCallback(M=>{M?T(M):C()},[T,C]);return a?In.createPortal(n.createElement(to,{ref:y,className:oe(o,N(St()),N(Tt),p&&N(St("open"))),"aria-modal":!0,role:"dialog","aria-label":ge(l,"Lightbox"),style:{...t.fade!==ze.animation.fade?{[K("fade_animation_duration")]:`${w}ms`}:null,...t.easing.fade!==ze.animation.easing.fade?{[K("fade_animation_timing_function")]:t.easing.fade}:null,...r.root},onFocus:M=>{f.current||(f.current=M.relatedTarget)}},e),c.root||document.body):null}const wo=se(He,bo);function xo({children:e}){return n.createElement(n.Fragment,null,e)}const Co=se(gn,xo);function _o(e){return xe(Rt,e)}function Po({toolbar:{buttons:e},render:{buttonClose:t,iconClose:r},styles:o}){const{close:i,setToolbarWidth:c}=ce(),{setContainerRef:s,containerRect:l}=en();re(()=>{c(l?.width)},[c,l?.width]);const a=()=>t?t():n.createElement(rt,{key:pe,label:"Close",icon:Hn,renderIcon:r,onClick:i});return n.createElement("div",{ref:s,style:o.toolbar,className:N(_o())},e?.map(d=>d===pe?a():d))}const So=se(Rt,Po);function rn(e,t){var r;return n.createElement(e.module.component,{key:e.module.name,...t},(r=e.children)===null||r===void 0?void 0:r.map(o=>rn(o,t)))}function Mo(e,t={}){const{easing:r,...o}=e,{easing:i,...c}=t;return{easing:{...r,...i},...o,...c}}function zo({carousel:e,animation:t,render:r,toolbar:o,controller:i,noScroll:c,on:s,plugins:l,slides:a,index:d,...p}){const{animation:u,carousel:h,render:f,toolbar:g,controller:m,noScroll:x,on:w,slides:C,index:_,plugins:T,...y}=ze,{config:M,augmentation:E}=Zn([Y(wo,[Y(Eo,[Y(co,[Y(uo),Y(So),Y(mo)])])])],l||T),k=E({animation:Mo(u,t),carousel:{...h,...e},render:{...f,...r},toolbar:{...g,...o},controller:{...m,...i},noScroll:{...x,...c},on:{...w,...s},...y,...p});return k.open?n.createElement(Vn,{...k},n.createElement(Yn,{slides:a||C,index:Ie(d||_)},n.createElement(zn,null,n.createElement(Fn,null,n.createElement(Wn,null,rn(Y(Co,M),k)))))):null}const Io={minZoom:1,maxZoomPixelRatio:1,zoomInMultiplier:2,doubleTapDelay:300,doubleClickDelay:500,doubleClickMaxStops:2,keyboardMoveDistance:50,wheelZoomDistanceFactor:100,pinchZoomDistanceFactor:100,pinchZoomV4:!1,scrollToZoom:!1};function yo(e){return Math.min(Math.max(e,Number.EPSILON),1)}function cn(e){const{minZoom:t,...r}={...Io,...e};return{minZoom:yo(t),...r}}function Lo(e,t,r,o){const i=n.useRef(void 0),c=n.useRef(void 0),{zoom:s}=G().animation,l=it(),a=D(()=>{var d,p,u;if((d=i.current)===null||d===void 0||d.cancel(),i.current=void 0,c.current&&o?.current){try{i.current=(u=(p=o.current).animate)===null||u===void 0?void 0:u.call(p,[{transform:c.current},{transform:`scale(${e}) translateX(${t}px) translateY(${r}px)`}],{duration:l?0:s??500,easing:i.current?"ease-out":"ease-in-out"})}catch(h){console.error(h)}c.current=void 0,i.current&&(i.current.onfinish=()=>{i.current=void 0})}});return re(a,[e,t,r,a]),n.useCallback(()=>{c.current=o?.current?window.getComputedStyle(o.current).transform:void 0},[o])}function No(e,t){const{on:r}=G(),o=D(()=>{var i;t||(i=r.zoom)===null||i===void 0||i.call(r,{zoom:e})});n.useEffect(o,[e,o])}function Oe(){const{zoom:e}=G();return cn(e)}function Oo(e,t){var r,o;let i={width:0,height:0},c={width:0,height:0};const{currentSlide:s}=le(),{imageFit:l}=G().carousel,{maxZoomPixelRatio:a}=Oe();if(e&&s){const p={...s,...t};if(ve(p)){const u=nt(p,l),h=Math.max(...(((r=p.srcSet)===null||r===void 0?void 0:r.map(g=>g.width))||[]).concat(p.width?[p.width]:[])),f=Math.max(...(((o=p.srcSet)===null||o===void 0?void 0:o.map(g=>g.height))||[]).concat(p.height?[p.height]:[]));h>0&&f>0&&e.width>0&&e.height>0&&(c=u?{width:Math.round(Math.min(h,e.width/e.height*f)),height:Math.round(Math.min(f,e.height/e.width*h))}:{width:h,height:f},c={width:c.width*a,height:c.height*a},i=u?{width:Math.min(e.width,c.width,h),height:Math.min(e.height,c.height,f)}:{width:Math.round(Math.min(e.width,e.height/f*h,h)),height:Math.round(Math.min(e.height,e.width/h*f,f))})}}const d=i.width?Math.max(tt(c.width/i.width,5),1):1;return{imageRect:i,maxZoom:d}}function It(e,t){return Math.hypot(e.clientX-t.clientX,e.clientY-t.clientY)}function yt(e,t,r=100,o=2){return e*Math.min(1+Math.abs(t/r),o)**Math.sign(t)}function Ro(e,t,r,o,i,c,s,l,a){const d=n.useRef([]),p=n.useRef(0),u=n.useRef(void 0),{globalIndex:h}=le(),{getOwnerWindow:f}=ye(),{containerRef:g,subscribeSensors:m}=ce(),{keyboardMoveDistance:x,zoomInMultiplier:w,wheelZoomDistanceFactor:C,scrollToZoom:_,doubleTapDelay:T,doubleClickDelay:y,doubleClickMaxStops:M,pinchZoomDistanceFactor:E,pinchZoomV4:k}=Oe(),I=n.useCallback(b=>{if(g.current){const{pageX:L,pageY:X}=b,{scrollX:U,scrollY:S}=f(),{left:z,top:q,width:J,height:ee}=g.current.getBoundingClientRect();return[L-z-U-J/2,X-q-S-ee/2]}return[]},[g,f]),F=D(b=>{const{key:L,metaKey:X,ctrlKey:U}=b,S=X||U,z=()=>{b.preventDefault(),b.stopPropagation()};if(e>1){const q=(J,ee)=>{z(),l(J,ee)};L==="ArrowDown"?q(0,x):L==="ArrowUp"?q(0,-x):L==="ArrowLeft"?q(-x,0):L==="ArrowRight"&&q(x,0)}L==="+"||S&&L==="="?(z(),i()):L==="-"||S&&L==="_"?(z(),c()):S&&L==="0"&&(z(),s(1))}),R=D(b=>{if((b.ctrlKey||_)&&Math.abs(b.deltaY)>Math.abs(b.deltaX)){b.stopPropagation(),s(yt(e,-b.deltaY,C),!0,...I(b));return}e>1&&(b.stopPropagation(),_||l(b.deltaX,b.deltaY))}),W=n.useCallback(b=>{const L=d.current;L.splice(0,L.length,...L.filter(X=>X.pointerId!==b.pointerId))},[]),P=n.useCallback(b=>{W(b),b.persist(),d.current.push(b)},[W]),A=D(b=>{var L;const X=d.current;if(b.pointerType==="mouse"&&b.buttons>1||!(!((L=a?.current)===null||L===void 0)&&L.contains(b.target)))return;e>1&&b.stopPropagation();const{timeStamp:U}=b;if(X.length===0&&U-p.current<(b.pointerType==="touch"?T:y)){p.current=0;const S=e>=1?e!==r?e*Math.max(r**(1/M),w):1:e!==t?e/Math.max(t**(-1/M),w):1;s(S,!1,...I(b))}else p.current=U;if(P(b),X.length===2){const S=It(X[0],X[1]);u.current={previousDistance:S,initialDistance:Math.max(S,1),initialZoom:e}}}),O=D(b=>{const L=d.current,X=L.find(U=>U.pointerId===b.pointerId);if(L.length===2&&u.current){b.stopPropagation(),P(b);const U=It(L[0],L[1]),S=k?u.current.initialZoom/u.current.initialDistance*U:yt(e,U-u.current.previousDistance,E);s(S,!0,...L.map(z=>I(z)).reduce((z,q)=>q.map((J,ee)=>z[ee]+J/2))),u.current.previousDistance=U;return}e>1&&(b.stopPropagation(),X&&(L.length===1&&l((X.clientX-b.clientX)/e,(X.clientY-b.clientY)/e),P(b)))}),V=n.useCallback(b=>{const L=d.current;L.length===2&&L.find(X=>X.pointerId===b.pointerId)&&(u.current=void 0),W(b)},[W]),$=n.useCallback(()=>{const b=d.current;b.splice(0,b.length),p.current=0,u.current=void 0},[]);tn(m,A,O,V,o),n.useEffect($,[h,$]),n.useEffect(()=>o?()=>{}:Je($,m(Ge,F),m(qe,R)),[o,m,$,F,R])}function To(e,t,r){const[o,i]=n.useState(1),[c,s]=n.useState(0),[l,a]=n.useState(0),d=Lo(o,c,l,r),{currentSlide:p,globalIndex:u}=le(),{containerRect:h,slideRect:f}=ce(),{minZoom:g,zoomInMultiplier:m}=Oe(),x=p&&ve(p)?p.src:void 0,w=!x||!r?.current;re(()=>{i(1),s(0),a(0)},[u,x]);const C=n.useCallback((E,k,I)=>{const F=I||o,R=c-(E||0),W=l-(k||0),P=(e.width*F-f.width)/2/F,A=(e.height*F-f.height)/2/F;s(Math.min(Math.abs(R),Math.max(P,0))*Math.sign(R)),a(Math.min(Math.abs(W),Math.max(A,0))*Math.sign(W))},[o,c,l,f,e.width,e.height]),_=n.useCallback((E,k,I,F)=>{const R=tt(E+.01<t?E-.01>g?E:g:t,5);k||d(),C(I?I*(1/o-1/R):0,F?F*(1/o-1/R):0,R),i(R)},[o,g,t,C,d]),T=D(()=>{o>1&&(o>t&&_(t,!0),C())});re(T,[h.width,h.height,T]);const y=n.useCallback(()=>{const E=o*m;_(o<1&&E>1?1:E)},[o,m,_]),M=n.useCallback(()=>{const E=o/m;_(o>1&&E<1?1:E)},[o,m,_]);return{zoom:o,offsetX:c,offsetY:l,disabled:w,changeOffsets:C,changeZoom:_,zoomIn:y,zoomOut:M}}const sn=n.createContext(null),st=ie("useZoom","ZoomControllerContext",sn);function Do({children:e}){const[t,r]=n.useState(),{slideRect:o}=ce(),{ref:i,minZoom:c}=Oe(),{imageRect:s,maxZoom:l}=Oo(o,t?.imageDimensions),{zoom:a,offsetX:d,offsetY:p,disabled:u,changeZoom:h,changeOffsets:f,zoomIn:g,zoomOut:m}=To(s,l,t?.zoomWrapperRef);No(a,u),Ro(a,c,l,u,g,m,h,f,t?.zoomWrapperRef);const x=n.useMemo(()=>({zoom:a,minZoom:c,maxZoom:l,offsetX:d,offsetY:p,disabled:u,zoomIn:g,zoomOut:m,changeZoom:h}),[a,c,l,d,p,u,g,m,h]);n.useImperativeHandle(i,()=>x,[x]);const w=n.useMemo(()=>({...x,setZoomWrapper:r}),[x,r]);return n.createElement(sn.Provider,{value:w},e)}const ko=fe("ZoomIn",n.createElement(n.Fragment,null,n.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),n.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"}))),Ao=fe("ZoomOut",n.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})),Lt=n.forwardRef(function({zoomIn:t,onLoseFocus:r},o){const i=n.useRef(!1),c=n.useRef(!1),{zoom:s,minZoom:l,maxZoom:a,zoomIn:d,zoomOut:p,disabled:u}=st(),{render:h}=G(),f=u||(t?s>=a:s<=l);return n.useEffect(()=>{f&&i.current&&c.current&&r(),f||(i.current=!0)},[f,r]),n.createElement(rt,{ref:o,disabled:f,label:t?"Zoom in":"Zoom out",icon:t?ko:Ao,renderIcon:t?h.iconZoomIn:h.iconZoomOut,onClick:t?d:p,onFocus:()=>{c.current=!0},onBlur:()=>{c.current=!1}})});function Zo(){const e=n.useRef(null),t=n.useRef(null),{focus:r}=ce(),o=n.useCallback(s=>{var l,a;!((l=s.current)===null||l===void 0)&&l.disabled?r():(a=s.current)===null||a===void 0||a.focus()},[r]),i=n.useCallback(()=>o(e),[o]),c=n.useCallback(()=>o(t),[o]);return n.createElement(n.Fragment,null,n.createElement(Lt,{zoomIn:!0,ref:e,onLoseFocus:c}),n.createElement(Lt,{ref:t,onLoseFocus:i}))}function Wo(){const{render:e}=G(),t=st();return e.buttonZoom?n.createElement(n.Fragment,null,e.buttonZoom(t)):n.createElement(Zo,null)}function $o(e){var t;return(((t=e.srcSet)===null||t===void 0?void 0:t.length)||0)>0}function Fo({current:e,preload:t},{type:r,source:o}){switch(r){case"fetch":return e?{current:e,preload:o}:{current:o};case"done":return o===t?{current:o}:{current:e,preload:t};default:throw new Error(Vt)}}function Vo(e){var t,r;const[{current:o,preload:i},c]=n.useReducer(Fo,{}),{slide:s,rect:l,imageFit:a,render:d,interactive:p}=e,u=s.srcSet.sort((y,M)=>y.width-M.width),h=(t=s.width)!==null&&t!==void 0?t:u[u.length-1].width,f=(r=s.height)!==null&&r!==void 0?r:u[u.length-1].height,g=nt(s,a),m=Math.max(...u.map(y=>y.width)),x=Math.min((g?Math.max:Math.min)(l.width,h*(l.height/f)),m),w=Nn(),C=D(()=>{var y;const M=(y=u.find(E=>E.width>=x*w))!==null&&y!==void 0?y:u[u.length-1];(!o||u.findIndex(E=>E.src===o)<u.findIndex(E=>E===M))&&c({type:"fetch",source:M.src})});re(C,[l.width,l.height,w,C]);const _=D(y=>c({type:"done",source:y})),T={WebkitTransform:p?"initial":"translateZ(0)"};return g||Object.assign(T,l.width/l.height<h/f?{width:"100%",height:"auto"}:{width:"auto",height:"100%"}),n.createElement(n.Fragment,null,i&&i!==o&&n.createElement(Me,{key:"preload",...e,offset:void 0,slide:{...s,src:i,srcSet:void 0},style:{position:"absolute",visibility:"hidden",...T},onLoad:()=>_(i),render:{...d,iconLoading:()=>null,iconError:()=>null}}),o&&n.createElement(Me,{key:"current",...e,slide:{...s,src:o,srcSet:void 0},style:T}))}function Uo({render:e,slide:t,offset:r,rect:o}){var i;const[c,s]=n.useState(),l=n.useRef(null),{zoom:a,maxZoom:d,offsetX:p,offsetY:u,setZoomWrapper:h}=st(),f=a>1,{carousel:g,on:m}=G(),{currentIndex:x}=le();re(()=>r===0?(h({zoomWrapperRef:l,imageDimensions:c}),()=>h(void 0)):()=>{},[r,c,h]);let w=(i=e.slide)===null||i===void 0?void 0:i.call(e,{slide:t,offset:r,rect:o,zoom:a,maxZoom:d});if(!w&&ve(t)){const C={slide:t,offset:r,rect:o,render:e,imageFit:g.imageFit,imageProps:g.imageProps,onClick:r===0?()=>{var _;return(_=m.click)===null||_===void 0?void 0:_.call(m,{index:x})}:void 0};w=$o(t)?n.createElement(Vo,{...C,slide:t,interactive:f,rect:r===0?{width:o.width*a,height:o.height*a}:o}):n.createElement(Me,{onLoad:_=>s({width:_.naturalWidth,height:_.naturalHeight}),...C})}return w?n.createElement("div",{ref:l,className:oe(N(bn),N(Ke),N(Dt),f&&N(xn)),style:r===0?{transform:`scale(${a}) translateX(${p}px) translateY(${u}px)`}:void 0},w):null}const Bo=({augment:e,addModule:t})=>{e(({zoom:r,toolbar:o,render:i,controller:c,...s})=>{const l=cn(r);return{zoom:l,toolbar:Rn(o,mt,n.createElement(Wo,null)),render:{...i,slide:a=>{var d;return ve(a.slide)?n.createElement(Uo,{render:i,...a}):(d=i.slide)===null||d===void 0?void 0:d.call(i,a)}},controller:{...c,preventDefaultWheelY:l.scrollToZoom},...s}}),t(se(mt,Do))};export{zo as L,Bo as Z};
